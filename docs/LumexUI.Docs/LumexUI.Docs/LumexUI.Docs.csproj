<Project Sdk="Microsoft.NET.Sdk.Web">

	<PropertyGroup>
		<TargetFramework>net8.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
	</PropertyGroup>

	<PropertyGroup>
		<WarningsAsErrors>RZ2012</WarningsAsErrors>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.AspNetCore.Components.WebAssembly.Server" Version="8.0.8" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\..\LumexUI.Docs.Generator\LumexUI.Docs.Generator.csproj" />
		<ProjectReference Include="..\LumexUI.Docs.Client\LumexUI.Docs.Client.csproj" />
	</ItemGroup>

	<!-- Installs Tailwind CSS dependencies if 'node_modules' is not present -->
	<Target Name="TailwindInstall" BeforeTargets="Compile" Condition="!Exists('node_modules')">
		<Exec Command="npm ci" />
	</Target>

	<!-- Enables Tailwind CSS compilation on every build in Debug mode -->
	<Target Name="TailwindRunDebug" BeforeTargets="Build" Condition="'$(Configuration)' == 'Debug'">
		<Exec Command="npm run build" />
	</Target>

	<!-- Enables Tailwind CSS compilation on every build in Release mode -->
	<Target Name="TailwindRunRelease" BeforeTargets="Build" Condition="'$(Configuration)' == 'Release'">
		<Exec Command="npm run build:prod" />
	</Target>

	<!-- Remove package.json and package-lock.json from the build output -->
	<ItemGroup>
		<Content Remove="*.json" />
	</ItemGroup>

</Project>
