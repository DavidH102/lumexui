@namespace LumexUI.Docs.Components
@inherits LayoutComponentBase
@layout DocsLayout

<CascadingValue TValue="DocsContentLayout" Value="@this" IsFixed="@true">
    <div class="pt-10 xl:mr-[11.5rem] xl:px-10">
        <DocsHeader Title="@_title"
                    Section="@_section"
                    Description="@_description" />

        <main class="mt-8 prose prose-zinc dark:prose-invert">
            @Body
        </main>

        <DocsFooter />
        <div class="hidden fixed z-20 overflow-y-auto top-[4.0625rem] right-[max(0px,calc(50%-40rem))] bottom-0 w-[13rem] py-10 xl:block">
            @TableOfContents
        </div>
    </div>
</CascadingValue>

@code {
    private RenderFragment TableOfContents => __builder =>
    {
        <div class="px-6">
            <h5 class="text-foreground-700 font-semibold mb-4 text-sm leading-6">
                On this page
            </h5>
            <nav>
                <ul class="text-sm leading-6">
                    @foreach( var section in _sections )
                    {
                        @* TODO: introduce scrollspy to set active state because #fragment change is not recognized by Blazor *@
                        <li class="@(section.IsSubsection ? "ml-4" : default)" @key="@(section.Title)">
                            <LumexNavLink Href="@(section.Link)"
                                          Color="@ThemeColor.None"
                                          Match="@NavLinkMatch.Prefix"
                                          Class="py-1 w-full data-[active=true]:text-primary">
                                @(section.Title)
                            </LumexNavLink>
                        </li>
                    }
                </ul>
            </nav>
        </div>
    };
}
