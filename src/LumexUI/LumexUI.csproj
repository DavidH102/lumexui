<Project Sdk="Microsoft.NET.Sdk.Razor">

	<PropertyGroup>
		<TargetFramework>net8.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
	</PropertyGroup>

	<PropertyGroup>
		<Title>LumexUI</Title>
		<Description>🚀 A versatile Blazor component library built using Tailwind CSS for efficient web development</Description>
		<Version>0.1.2</Version>
		<Authors>desmondinho</Authors>
		<PackageId>LumexUI</PackageId>
		<!--<PackageIcon>logo.png</PackageIcon>-->
		<PackageTags>blazor;components;library;tailwindcss;</PackageTags>
		<PackageProjectUrl>https://github.com/LumexUI/lumexui</PackageProjectUrl>
		<PackageReadmeFile>README.md</PackageReadmeFile>
		<PackageLicenseExpression>MIT</PackageLicenseExpression>
		<RepositoryUrl>https://github.com/LumexUI/lumexui</RepositoryUrl>
		<RepositoryType>git</RepositoryType>
	</PropertyGroup>

	<PropertyGroup>
		<GeneratePackageOnBuild>false</GeneratePackageOnBuild>
		<GenerateDocumentationFile>true</GenerateDocumentationFile>
		<PackageRequireLicenseAcceptance>true</PackageRequireLicenseAcceptance>
	</PropertyGroup>

	<PropertyGroup>
		<TargetsForTfmSpecificBuildOutput>$(TargetsForTfmSpecificBuildOutput);CopyProjectReferencesToPackage</TargetsForTfmSpecificBuildOutput>
	</PropertyGroup>

	<ItemGroup>
		<None Include="..\..\LICENSE" Pack="true" Visible="false" PackagePath="" />
		<None Include="..\..\README.md" Pack="true" Visible="false" PackagePath="" />
		<!--<None Include="..\assets\logo.png" Pack="true" Visible="false" PackagePath="" />-->
	</ItemGroup>

	<ItemGroup>
		<SupportedPlatform Include="browser" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.AspNetCore.Components.Web" Version="8.0.6" />
		<PackageReference Include="TailwindMerge.NET" Version="0.3.0" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\LumexUI.Utilities\LumexUI.Utilities.csproj" />
	</ItemGroup>

	<!-- Add utilities project to the build output -->
	<Target Name="CopyProjectReferencesToPackage">
		<ItemGroup>
			<BuildOutputInPackage Include="$(OutputPath)$(AssemblyName).Utilities.dll"></BuildOutputInPackage>
		</ItemGroup>
	</Target>

	<!-- Install npm dependencies if 'node_modules' is not present -->
	<Target Name="Npm" BeforeTargets="Compile" Condition="!Exists('node_modules')">
		<Exec Command="npm ci" />
	</Target>

	<!-- Run the 'build:prod' script on every build in Release mode -->
	<Target Name="NpmBuild" BeforeTargets="Build">
		<Exec Command="npm run build" />
	</Target>

	<!-- Include components styles and Tailwind plugin to the build output -->
	<ItemGroup>
		<None Include="Styles\*.cs">
			<TargetPath>theme\components\%(Filename).cs</TargetPath>
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</None>
		<None Include="Scripts\Plugin\dist\plugin.js">
			<TargetPath>theme\plugin.js</TargetPath>
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</None>
	</ItemGroup>

	<!-- Remove package.json and package-lock.json from the build output -->
	<ItemGroup>
		<None Include="package.json" />
		<None Include="package-lock.json" />
		<Content Remove="package.json" />
		<Content Remove="package-lock.json" />
	</ItemGroup>

	<ItemGroup>
		<InternalsVisibleTo Include="LumexUI.Tests" />
	</ItemGroup>

</Project>